@{
    ViewBag.Title = "Gerçekleşen Sevkiyat Planı Raporu";
    Layout = "~/Views/Shared/_Layout.cshtml";
}@section Styles{<style>
    td.details-control {background: url('/Content/assets/global/plugins/datatables/images/details_open.png') no-repeat center center;cursor: pointer;}
    tr.shown td.details-control {background: url('/Content/assets/global/plugins/datatables/images/details_close.png') no-repeat center center;}
    .btn {width: 120px;text-align: center;}
    .detay:hover {background-color: rgb(176, 190, 217) !important;}
</style>
}<div class="row control-content">
    <div class="col-sm-4 col-xs-12" style="margin-top:10px;">
        <div class="col-sm-4 col-xs-6" style="color:#32c5d2;font-weight:bold;">Başlangıç Tarihi</div>
        <div class="col-sm-8 col-xs-6"><div class="basTarih" style="width:100%;"></div></div>
    </div>
    <div class="col-sm-4 col-xs-12" style="margin-top:10px;">
        <div class="col-sm-4 col-xs-6" style="color:#32c5d2;font-weight:bold;">Bitiş Tarihi</div>
        <div class="col-sm-8 col-xs-6"><div class="bitTarih" style="width:100%;"></div></div>
    </div>
    <div class="col-sm-3 col-xs-12" style="margin-top:10px;">
        <div class="col-sm-10 col-xs-4">
            <div class="btn btn-lg green listele-buton" style="width:100%; margin-bottom:10px;">Listele<i class="fa fa-check"></i></div>
        </div>
    </div>
</div>
<div class="row" id="gerceklesen-sevkiyat-plani-grid" style="margin-top:10px;"></div>
@section Scripts{<script src="~/Content/assets/global/plugins/moment/moment.min.js"></script>
    <script>
         var basTarih = @ViewBag.BasTarih;
        var bitTarih = @ViewBag.BitTarih;
        var tempbasTarih = @ViewBag.BasTarih;
         var tempbitTarih = @ViewBag.BitTarih;
        $(document).ready(function () {
            var dateVal = new Date();
            dateVal.setHours(0, 0, 0);
            var sayac = 0;
            var bitTeslimTarih = '@DateTime.Today.ToString("MM/dd/yyyy")';

            $(".basTarih").dxDateBox({
                dataType: 'date',
                displayFormat: 'dd/MM/yyyy',
                value: '@DateTime.Today.ToString("MM/dd/yyyy")',
                onValueChanged: function (e) {
                    console.log("ccc");
                    if(e.value!=null && sayac!=0)
                        tempbasTarih = Math.ceil((new Date(e.value) - new Date(Date.UTC(1899, 11, 30))) / (24 * 60 * 60 * 1000));
                }
            });
            $(".bitTarih").dxDateBox({
                dataType: 'date',
                displayFormat: 'dd/MM/yyyy',
                value: '@DateTime.Today.ToString("MM/dd/yyyy")',
                onValueChanged: function (e) {
                    console.log("aaa");
                    if (e.value != null && sayac != 0)
                        tempbitTarih = Math.ceil((new Date(e.value) - new Date(Date.UTC(1899, 11, 30))) / (24 * 60 * 60 * 1000));
                }
            });
        });
        $(document).on("click", ".listele-buton", function () {
            basTarih = tempbasTarih;
            bitTarih = tempbitTarih;
            PartialView("/Reports/Stock/GerceklesenSevkiyatPlaniList", 'gerceklesen-sevkiyat-plani-grid', JSON.stringify({ bastarih: basTarih, bittarih: bitTarih }));
        });
    </script>
}








