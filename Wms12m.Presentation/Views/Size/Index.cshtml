
@{
    ViewBag.Title = "Ölçü Kartı işlemleri";
    Layout = "~/Views/Shared/_Layout.cshtml";
}


<script type="text/javascript">
    var SizeGridUrl = '@Url.Action("SizeGridPartial", "Size")';
    var SizeDetailUrl = '@Url.Action("SizeDetailPartial", "Size")';
    var DeleteFunctionUrl = '@Url.Action("Delete", "Size")';
    var CorrridorList = '@Url.Action("SearchCorrridor", "Shelf")';
    var StoreListUrl = '@Url.Action("StoreList", "Corridor")';
    var ShelfListUrl = '@Url.Action("ShelfList", "Chapter")';
    var ChapterListUrl = '@Url.Action("ChapterList", "Floor")';
    var FloorListUrl = '@Url.Action("FloorList", "Size")';
    $(document).ready(function () {
        PartialView(SizeDetailUrl, 'CreateEdit', JSON.stringify({ Id: '0' }));
        StoreList();
        //$("#CorridorList").append("<option value=" + '0' + ">Lütfen Koridor Seçiniz !!!</option>");
        //$("#ShelfListi").append("<option value=" + '0' + ">Lütfen Raf Seçiniz !!!</option>");
        //$("#ChapterListi").append("<option value=" + '0' + ">Lütfen Bölüm Seçiniz !!!</option>");
        //$("#FloorListi").append("<option value=" + '0' + ">Lütfen Kat Seçiniz !!!</option>");
        $('.ara-btn').prop('disabled', 'disabled');
        $('#CorridorList').prop('disabled', 'disabled');
        $('#ShelfListi').prop('disabled', 'disabled');
        $('#ChapterListi').prop('disabled', 'disabled');
        $('#FloorListi').prop('disabled', 'disabled');

        $('#SearchBtn').click(function () {
            FuncSearchBtn();
        });

        $('#StoreListi').on('change', function () {
            if (this.value == 0) {
                $("#CorridorList option").remove();
                $('#CorridorList').prop('disabled', 'disabled');
                $("#ShelfListi option").remove();
                $('#ShelfListi').prop('disabled', 'disabled');
                $("#ChapterListi option").remove();
                $('#ChapterListi').prop('disabled', 'disabled');
                $("#FloorListi option").remove();
                $('#FloorListi').prop('disabled', 'disabled');
                $('.ara-btn').prop('disabled', 'disabled');
            }
            else {
                $("#ShelfListi option").remove();
                $('#ShelfListi').prop('disabled', 'disabled');
                $("#ChapterListi option").remove();
                $('#ChapterListi').prop('disabled', 'disabled');
                $("#FloorListi option").remove();
                $('#FloorListi').prop('disabled', 'disabled');
                $('.ara-btn').prop('disabled', 'disabled');
                CorridorList(this.value);
            }
        });
        $('#CorridorList').on('change', function () {
            if (this.value == 0) {
                $("#ShelfListi option").remove();
                $('#ShelfListi').prop('disabled', 'disabled');
                $("#ChapterListi option").remove();
                $('#ChapterListi').prop('disabled', 'disabled');
                $("#FloorListi option").remove();
                $('#FloorListi').prop('disabled', 'disabled');
                $('.ara-btn').prop('disabled', 'disabled');
            }
            else {
                $("#ChapterListi option").remove();
                $('#ChapterListi').prop('disabled', 'disabled');
                $("#FloorListi option").remove();
                $('#FloorListi').prop('disabled', 'disabled');
                $('.ara-btn').prop('disabled', 'disabled');
                Shelf(this.value);
            }
        });
        $('#ShelfListi').on('change', function () {
            if (this.value == 0) {
                $("#ChapterListi option").remove();
                $('#ChapterListi').prop('disabled', 'disabled');
                $("#FloorListi option").remove();
                $('#FloorListi').prop('disabled', 'disabled');
                $('.ara-btn').prop('disabled', 'disabled');
            }
            else {
                $("#FloorListi option").remove();
                $('#FloorListi').prop('disabled', 'disabled');
                Chapter(this.value);
            }
        });
        $('#ChapterListi').on('change', function () {
            if (this.value == 0) {
                $("#FloorListi option").remove();
                $('#FloorListi').prop('disabled', 'disabled');
                $('.ara-btn').prop('disabled', 'disabled');
            }
            else {
                Floor(this.value);
            }
        });
        $('#FloorListi').on('change', function () {
            if (this.value != 0) {
                $(".ara-btn").removeAttr("disabled");
            }
            else {
                $('.ara-btn').prop('disabled', 'disabled');
            }
        });
    });
    function FuncSearchBtn() {
        var Type = $("input[type='radio'][name='Locked']:checked").val();
        var StoreId = $("#StoreListi option:selected").val();
        var CorridorId = $("#CorridorList option:selected").val();
        var ShelfId = $("#ShelfListi option:selected").val();
        var ChapterId = $("#ChapterListi option:selected").val();
        console.log(ChapterId);
        var FloorId = $("#FloorListi option:selected").val();
        PartialView(SizeGridUrl, 'SizeGrid', JSON.stringify({ Id: (Type + "#" + StoreId + "#" + CorridorId + "#" + ShelfId + "#" + ChapterId + "#" + FloorId) }));
    }
    function CorridorList(Id) {
        $("#CorridorList option").remove();
        
        $.ajax({
            url: CorrridorList,
            type: 'POST',
            data: JSON.stringify({ Id: Id }),
            dataType: "json",
            contentType: 'application/json; charset=utf-8',
            success: function (data) {
                if (data == "") {
                    //alert("Corridor Hata Oluştu !!!");
                } else {
                    $("#CorridorList").removeAttr("disabled");
                    $("#CorridorList").append("<option value=" + '0' + ">Lütfen Karidor Seçiniz !!!</option>");
                    $.each(data, function (i, item) {
                        $("#CorridorList").append("<option value=" + item.Id + ">" + item.CorridorName + "</option>");
                    });
                }
            }
        });
    }


    function CreateCorridorList(Id) {
        $("#CorridorList option").remove();
        $("#CorridorList").append("<option value=" + '0' + ">Lütfen Karidor Seçiniz !!!</option>");
        $.ajax({
            url: CorrridorList,
            type: 'POST',
            data: JSON.stringify({ Id: Id }),
            dataType: "json",
            contentType: 'application/json; charset=utf-8',
            success: function (data) {
                if (data == "") {
                    //alert("Create Corridor Hata Oluştu !!!");
                } else {
                    $.each(data, function (i, item) {
                        $("#CorridorList").append("<option value=" + item.Id + ">" + item.CorridorName + "</option>");
                    });
                }
            }
        });
    }
    function StoreList() {
        $("#StoreListi option").remove();
        $("#StoreListi").append("<option value=" + '0' + ">Lütfen Depo Seçiniz !!!</option>");
        $.ajax({
            url: StoreListUrl,
            type: 'POST',
            data: '',
            dataType: "json",
            contentType: 'application/json; charset=utf-8',
            success: function (data) {
                if (data == "") {
                    //Modaldialog("Kaydedilmiş depo bulunmamaktadır.", "Uyarı", "Tamam", "btn-success");
                } else {
                    $.each(data, function (i, item) {
                        $("#StoreListi").append("<option value=" + item.Id + ">" + item.StoreName + "</option>");
                    });
                }
            }
        });
    }
    function Shelf(Id) {
        $("#ShelfListi option").remove();
        $.ajax({
            url: ShelfListUrl,
            type: 'POST',
            data: JSON.stringify({ Id: Id }),
            dataType: "json",
            contentType: 'application/json; charset=utf-8',
            success: function (data) {
                if (data == "") {
                    //alert("Shelf Hata Oluştu !!!");
                } else {
                    $("#ShelfListi").removeAttr("disabled");
                    $("#ShelfListi").append("<option value=" + '0' + ">Lütfen Raf Seçiniz !!!</option>");
                    $.each(data, function (i, item) {
                        $("#ShelfListi").append("<option value=" + item.Id + ">" + item.ShelfName + "</option>");
                    });
                }
            }
        });
    }
    function Chapter(Id) {
        $("#ChapterListi option").remove();
        
        $.ajax({
            url: ChapterListUrl,
            type: 'POST',
            data: JSON.stringify({ Id: Id }),
            dataType: "json",
            contentType: 'application/json; charset=utf-8',
            success: function (data) {
                if (data == "") {
                    //alert("Chapter Hata Oluştu !!!");
                } else {
                    $("#ChapterListi").removeAttr("disabled");
                    $("#ChapterListi").append("<option value=" + '0' + ">Lütfen Bölüm Seçiniz !!!</option>");
                    $.each(data, function (i, item) {
                        console.log(item);
                        $("#ChapterListi").append("<option value=" + item.Value + ">" + item.Text + "</option>");
                    });
                }
            }
        });
    }
    function Floor(Id) {
        $("#FloorListi option").remove();
        
        $.ajax({
            url: FloorListUrl,
            type: 'POST',
            data: JSON.stringify({ Id: Id }),
            dataType: "json",
            contentType: 'application/json; charset=utf-8',
            success: function (data) {
                if (data == "") {
                    //alert("Floor Hata Oluştu !!!");
                } else {
                    $("#FloorListi").removeAttr("disabled");
                    $("#FloorListi").append("<option value=" + '0' + ">Lütfen Kat Seçiniz !!!</option>");
                    $.each(data, function (i, item) {
                        $("#FloorListi").append("<option value=" + item.Value + ">" + item.Text + "</option>");
                    });
                }
            }
        });
    }
    function SizeReturn(Data) {
        //FuncSearchBtn();
        Modaldialog(Data.Message, (Data.Status == true ? "Başaralı" : "Hata"), "Tamam", "btn-success");
        CreateEdit('0');

    }
    function CreateEdit(Id) {
        PartialView(SizeDetailUrl, 'CreateEdit', JSON.stringify({ Id: Id == null ? '' : Id }));
    }
    function InsertRefresh() {
        PartialView(SizeDetailUrl, "CreateEdit", '0');
    }
</script>
<h3 class="page-title">Ölçü İşlemleri</h3>
<div class="row">
    <div class="col-md-12">
        <div id="CreateEdit"></div>
        <div>
            <div class="portlet box green">
                <div class="portlet-title">
                    <div class="caption">
                        <i class="fa fa-gift"></i>Ölçü Listesi
                    </div>
                </div>
                <div class="portlet-body form">
                    <div class="form-horizontal">
                        <div class="form-body">
                            <div class="row">
                                <div class="col-xs-12 col-sm-5 col-md-5 col-lg-5">
                                    <div class="form-group">
                                        <div class="radio-list col-xs-12 col-md-12 col-lg-12">
                                            <div class="col-sm-12 col-xs-12">
                                                <label>
                                                    <label style="color:#32c5d2;">Durum</label>
                                                </label>
                                            </div>
                                            <div class="radio-list col-sm-12 col-xs-12">
                                                <label class="radio-inline col-xs-3 col-md-3 col-lg-3" style="padding-left:20px;">
                                                    <input type="radio" name="Locked" value="Locked" /> Aktif
                                                </label>
                                                <label class="radio-inline col-xs-3 col-md-3 col-lg-3">
                                                    <input type="radio" name="Locked" value="noLocked" checked /> Pasif
                                                </label>
                                                <label class="radio-inline col-xs-3 col-md-3 col-lg-3">
                                                    <input type="radio" name="Locked" value="All" checked /> Tümü
                                                </label>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-xs-12 col-sm-6 col-md-6 col-lg-7">
                                    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12">
                                        <div class="row">
                                            <label class="control-label col-sm-2 col-md-2 col-lg-2" style="color:#32c5d2;">Depo</label>
                                            <div class="col-sm-8 col-md-8 col-lg-7">
                                                <select id="StoreListi" class="form-control"></select>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12" style="margin-top:5px;">
                                        <div class="row">
                                            <label class="control-label col-sm-2 col-md-2 col-lg-2" style="color:#32c5d2;">Koridor</label>
                                            <div class="col-sm-8 col-md-8 col-lg-7">
                                                <select id="CorridorList" class="form-control"></select>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12" style="margin-top:5px;">
                                        <div class="row">
                                            <label class="control-label col-sm-2 col-md-2 col-lg-2" style="color:#32c5d2;">Raf</label>
                                            <div class="col-sm-8 col-md-8 col-lg-7">
                                                <select id="ShelfListi" class="form-control"></select>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12" style="margin-top:5px;">
                                        <div class="row">
                                            <label class="control-label col-sm-2 col-md-2 col-lg-2" style="color:#32c5d2;">Bölüm</label>
                                            <div class="col-sm-8 col-md-8 col-lg-7">
                                                <select id="ChapterListi" class="form-control"></select>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-xs-12 col-sm-12 col-md-12 col-lg-12" style="margin-top:5px;">
                                        <div class="row">
                                            <label class="control-label col-xs-2 col-sm-2 col-md-2 col-lg-2" style="color:#32c5d2;">Kat</label>
                                            <div class="col-sm-8 col-md-8 col-lg-7">
                                                <select id="FloorListi" class="form-control"></select>
                                            </div>
                                            <div class="col-sm-2 col-md-2 col-lg-2"  style="float:right;">
                                                <button type="submit" class="btn green ara-btn" id="SearchBtn">Ara</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="table-responsive" id="SizeGrid" style="padding:10px;margin-top:18px;"></div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="~/Content/Scripts/_Operation.js"></script>




