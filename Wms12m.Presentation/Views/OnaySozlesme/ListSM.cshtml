
@model List<SozlesmeOnaySelect>
@{
    System.Web.Script.Serialization.JavaScriptSerializer serializer = new System.Web.Script.Serialization.JavaScriptSerializer();
    serializer.MaxJsonLength = Int32.MaxValue;
}

<div class="col-md-12" style="width:100%;">
    <!-- BEGIN EXAMPLE TABLE PORTLET-->
    <div class="portlet box green">
        <div class="portlet-title">
            <div class="caption">
                <i class="fa fa-gift"></i>Sözleşme Onay SM
            </div>

        </div>

        <div class="portlet-body">
            <div class="table-toolbar">
                <div class="row">
                    <div class="col-md-6">
                        <div class="btn-group">

                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="btn-group pull-right">
                            <button class="btn green  btn-outline dropdown-toggle" data-toggle="dropdown">
                                Tools
                                <i class="fa fa-angle-down"></i>
                            </button>
                            <ul class="dropdown-menu pull-right">
                                <li>
                                    <a href="javascript:;">
                                        <i class="fa fa-print"></i> Print
                                    </a>
                                </li>
                                <li>
                                    <a href="javascript:;">
                                        <i class="fa fa-file-pdf-o"></i> Save as PDF
                                    </a>
                                </li>
                                <li>
                                    <a href="javascript:;">
                                        <i class="fa fa-file-excel-o"></i> Export to Excel
                                    </a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <table class="table table-striped table-bordered" id="sample_1">
                <thead>
                    <tr>
                        <th></th>
                        <th>Liste No</th>
                        <th>Sıra No</th>
                        <th>Bağlantı Kodu</th>
                        <th>Bağlantı Tutarı</th>
                        <th>Başlangıç Tarihi</th>
                        <th>Bitiş Tarihi</th>
                        <th>Müşteri Kodu</th>
                        <th>Sözleşme Notu</th>
                        <th>Kredi Limiti</th>
                        <th>Bakiye</th>
                        <th>Toplam Bakiye</th>
                        <th>Bekleyen Sipariş</th>
                        <th>Ortalama Vade</th>
                        <th>Alınan Bordro</th>
                        <th>Alınan Bordro Ortalama Vade</th>
                        <th>Alınan Çek Tutar</th>
                        <th>Alınan Çek Ortalama Vadesi</th>
                        <th>Alınan Nakit vb.</th>
                        <th>Toplam Tahsilat</th>
                    </tr>
                </thead>
                <tbody id="GorevFrom">
                    @foreach (var item in Model)
                    {
                        <tr data-ID="@item.ListeNo">
                            @* <td style="width:20px!important;" class="details-control"></td>*@
                            <td style="width:20px!important;" class="details-control"></td>

                            <td>@item.ListeNo</td>
                            <td>@item.SiraNo</td>
                            <td>@item.BaglantiKodu</td>
                            <td>@item.BaglantiTutar</td>
                            <td>@item.BasTarih.FromOADateInt()</td>
                            <td>@item.BitTarih.FromOADateInt()</td>
                            <td>@item.MusteriKod</td>
                            <td>@item.Aciklama</td>
                            <td>@item.KrediLimiti</td>
                            <td>@item.Bakiye</td>
                            <td>@item.ToplamBakiye</td>
                            <td>@item.BekleyenSiparisTutar</td>
                            <td>0</td>
                            <td>@item.AlinanBordro</td>
                            <td>@item.AlinanBordroOrtalamaVade</td>
                            <td>@item.CekTutari</td>
                            <td>@item.CekOrtalamaVadeTarih</td>
                            <td>@item.NakitTutari</td>
                            <td>0</td>
                        </tr>
                    }
                </tbody>
            </table>

        </div>
    </div>
    <!-- END EXAMPLE TABLE PORTLET-->
</div>

<script>
        $(document).ready(function () {
        //Globalize.locale('tr');
            var table = $('#sample_1').DataTable({
                "ordering": false,
                "language": { "url": "http://cdn.datatables.net/plug-ins/1.10.13/i18n/Turkish.json" },
                initComplete: function () {
                    this.api().columns([1, 2, 3, 4]).every(function () {
                        var column = this;
                        var select = $('<br /><select class="form-control input-circle" style="max-width:100px;"><option value=""></option></select>')
                            .appendTo($(column.header()))
                            .on('change', function () {
                                var val = $.fn.dataTable.util.escapeRegex($(this).val());
                                column.search(val ? '^' + val + '$' : '', true, false).draw();
                            });
                        column.data().unique().sort().each(function (d, j) { select.append('<option value="' + d + '">' + d + '</option>') });
                    });
                }
            });
            $('#sample_1 tbody').on('click', 'td.details-control', function () {
                var tr = $(this).closest('tr');
                var row = table.row(tr);
                if (row.child.isShown()) { row.child.hide(); tr.removeClass('shown'); }
                else { row.child(newrow(tr.data('id'))).show(); format(tr.data('id')); tr.addClass('shown'); }
            });



          //  var model =  @Html.Raw(serializer.Serialize(Model));
          //  console.log(model);
          //  $('#sample_1').DataTable({ "language": { "url": "http://cdn.datatables.net/plug-ins/1.10.13/i18n/Turkish.json" } });
    });

</script>
