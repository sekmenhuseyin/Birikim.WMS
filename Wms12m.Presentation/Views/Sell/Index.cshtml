@{
    ViewBag.Title = "Sipariş Planlama";
    Layout = "~/Views/Shared/_Layout.cshtml";
}@section Styles{<link href="@Url.Content("~/Content/assets/global/plugins/datatables/datatables.min.css")" rel="stylesheet" type="text/css" />
<link href="@Url.Content("~/Content/assets/global/plugins/datatables/plugins/bootstrap/datatables.bootstrap.min.css")" rel="stylesheet" type="text/css" />
}<h3 class="page-title">Sipariş Planlama</h3>
<div class="row">
    <div class="col-md-12">
        <div class="mt-element-step">
            <div class="row step-background-thin">
                <div class="col-md-3 bg-grey-steel mt-step-col active">
                    <div class="mt-step-number">1</div>
                    <div class="mt-step-title uppercase font-grey-cascade">Sipariş Seçimi</div>
                    <div class="mt-step-content font-grey-cascade">Bir sipariş Seçin</div>
                </div>
                <div class="col-md-3 bg-grey-steel mt-step-col">
                    <div class="mt-step-number">2</div>
                    <div class="mt-step-title uppercase font-grey-cascade">Malzeme Seçimi</div>
                    <div class="mt-step-content font-grey-cascade">İstenen Malzemeleri Seçin</div>
                </div>
                <div class="col-md-3 bg-grey-steel mt-step-col">
                    <div class="mt-step-number">3</div>
                    <div class="mt-step-title uppercase font-grey-cascade">Özet</div>
                    <div class="mt-step-content font-grey-cascade">Sipariş Özeti</div>
                </div>
                <div class="col-md-3 bg-grey-steel mt-step-col">
                    <div class="mt-step-number">4</div>
                    <div class="mt-step-title uppercase font-grey-cascade">Onay</div>
                    <div class="mt-step-content font-grey-cascade">Onaylayın</div>
                </div>
            </div>
        </div>
        <div class="portlet box green m-t-30">
            <div class="portlet-title"><div class="caption"><i class="fa fa-gift"></i>Sipariş Seçimi</div></div>
            <div class="portlet-body form">
                @using (Html.BeginForm("Step2", "Sell", FormMethod.Post, new { @class = "form-horizontal" }))
                {
                    @Html.AntiForgeryToken()
                    @Html.ValidationSummary(true)
                    <div class="form-body">
                        <div class="form-group">
                            <label class="col-md-3 control-label">Şirket</label>
                            <div class="col-md-4">
                                @Html.DropDownList("SirketID", null, htmlAttributes: new { @class = "form-control input-circle", required = "required" })
                                <span class="field-validation-valid" data-valmsg-for="SirketID" data-valmsg-replace="true" style="color:red;"></span>
                            </div>
                        </div>
                        <div class="form-group">
                            <label class="col-md-3 control-label">Depo</label>
                            <div class="col-md-4">
                                <select name="DepoID" id="DepoID" class="form-control input-circle" required="required"><option value="0">Depo Seçiniz</option></select>
                                <span class="field-validation-valid" data-valmsg-for="DepoID" data-valmsg-replace="true" style="color:red;"></span>
                            </div>
                        </div>
                        <div class="form-group" id="liste"></div>
                    </div>
                }
            </div>
        </div>
    </div>
</div>
@section Scripts{
<script src="~/Content/assets/global/scripts/datatable.js" type="text/javascript"></script>
<script src="~/Content/assets/global/plugins/datatables/datatables.min.js" type="text/javascript"></script>
<script src="~/Content/assets/global/plugins/datatables/plugins/bootstrap/datatables.bootstrap.js" type="text/javascript"></script>
<script>
    var selected = "";
    $("#SirketID").prepend("<option value='0'>Seçiniz !!!</option>"); $("#SirketID")[0].selectedIndex = 0;
    $('#SirketID').on('change', function () {
        $("#DepoID option").remove(); $("#liste").html("");
        $.ajax({
            url: "/Sell/GetDepo/" + $('#SirketID').val(),
            type: 'POST',
            dataType: "json",
            success: function (data) {
                if (data != "") {
                    $.each(data, function (i, item) {
                        $('#DepoID').append($('<option>', { value: item.Value, text: item.Text }));
                    });
                    $("#DepoID").prepend("<option value='0'>Seçiniz !!!</option>"); $("#DepoID")[0].selectedIndex = 0;
                }
            }
        });
    });
    $('#DepoID').on('change', function () {
        $.ajax({
            type: 'POST',
            url: "/Sell/GetSiparis/" + $('#SirketID').val() + "-" + $('#DepoID').val(),
            dataType: "html",
            success: function (data) { $("#liste").html(data); }
        });
    });
    function toggle(id) {
        var id2 = id.replace(" ", "_");
        $("#c-" + id2).attr('checked', !$("#c-" + id2).attr('checked'));
        if ($("#c-" + id2).attr('checked')) selected = selected + id + ",";
        else selected = selected.replace(id + ",", "");
        $("#checkboxes").val(selected);
    }
</script>
}