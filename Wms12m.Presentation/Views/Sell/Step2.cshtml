@model IEnumerable<frmSiparisMalzeme>
@{
    ViewBag.Title = "Step2";
    Layout = "~/Views/Shared/_Layout.cshtml";
}@section Styles{<link href="@Url.Content("~/Content/assets/global/plugins/datatables/datatables.min.css")" rel="stylesheet" type="text/css" />
<link href="@Url.Content("~/Content/assets/global/plugins/datatables/plugins/bootstrap/datatables.bootstrap.min.css")" rel="stylesheet" type="text/css" />
}}<h2>Step2</h2>
<table class="table">
    <thead><tr><th>Seç</th><th>MalKodu</th><th>MalAdi</th><th>Miktar</th><th>Birim</th></tr></thead>
    <tbody>
        @foreach (var item in Model)
        {
            <tr style="cursor:pointer;" onclick="toggle('@item.MalKodu')">
                <td width="20"><input type="checkbox" name="cb" id="c-@item.MalKodu" class="form-control" disabled /></td>
                <td>@Html.DisplayFor(modelItem => item.MalKodu)</td>
                <td>@Html.DisplayFor(modelItem => item.MalAdi)</td>
                <td>@Html.DisplayFor(modelItem => item.Miktar)</td>
                <td>@Html.DisplayFor(modelItem => item.Birim)</td>
            </tr>
        }
    </tbody>
</table>
<div class="row">
    <div class="col-md-2 col-md-offset-10">
        <input type="hidden" name="checkboxes" id="checkboxes" value="" />
        <input type="submit" class="btn btn-primary btn-block green" value="Seç >>>" />
    </div>
</div>
@section Scripts{
<script src="~/Content/assets/global/scripts/datatable.js" type="text/javascript"></script>
<script src="~/Content/assets/global/plugins/datatables/datatables.min.js" type="text/javascript"></script>
<script src="~/Content/assets/global/plugins/datatables/plugins/bootstrap/datatables.bootstrap.js" type="text/javascript"></script>
<script>
$(document).ready(function () { $('#sample_2').DataTable(); selected = ""; });
$("#SirketID").prepend("<option value='0'>Seçiniz !!!</option>"); $("#SirketID")[0].selectedIndex = 0;
$('#SirketID').on('change', function () {
    $("#DepoID option").remove(); $("#liste").html("");
    $.ajax({
        url: "/Sell/GetDepo/" + $('#SirketID').val(),
        type: 'POST',
        dataType: "json",
        success: function (data) {
            if (data != "") {
                $.each(data, function (i, item) {
                    $('#DepoID').append($('<option>', { value: item.Value, text: item.Text }));
                });
                $("#DepoID").prepend("<option value='0'>Seçiniz !!!</option>"); $("#DepoID")[0].selectedIndex = 0;
            }
        }
    });
});
$('#DepoID').on('change', function () {
    $.ajax({
        type: 'POST',
        url: "/Sell/GetSiparis/" + $('#SirketID').val() + "-" + $('#DepoID').val(),
        dataType: "html",
        success: function (data) { $("#liste").html(data); }
    });
});
function toggle(id) {
    $("#c-" + id).attr('checked', !$("#c-" + id).attr('checked'));
    if ($("#c-" + id).attr('checked')) selected = selected + id + ",";
    else selected = selected.replace(id + ",", "");
    $("#checkboxes").val(selected);
}
</script>
}