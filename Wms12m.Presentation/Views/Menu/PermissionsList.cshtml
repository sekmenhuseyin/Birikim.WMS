@model IEnumerable<GetMenuRolesFor_Result>
@{ int i = 0; }
<div class="row m-b-10">
	<div class="col-md-5 col-md-offset-2 bold">Yetki Adı</div><div class="col-md-2 text-center bold">Seç</div>
</div>
@using (Ajax.BeginForm("Save", "Menu", new { }, new AjaxOptions { InsertionMode = InsertionMode.Replace, OnSuccess = "FuncSearchBtn();", OnFailure = "FuncSearchBtn();" }, new { @class = "form-horizontal", id="frmAdd" }))
{
	@Html.AntiForgeryToken()
	<input type="hidden" name="MenuID" value="@ViewBag.id" />
	<input type="hidden" id="RoleName" name="RoleName" value="" />
	foreach (var item in Model)
	{
		<div class="row">
            <input type="hidden" id="role@{@i}" name="RoleIDs" value="@item.ID" />
			<div class="col-md-5 col-md-offset-2"><input class="form-control" name="Roles" type="text" readonly value="@item.RoleName" required></div>
            <div class="checkbox col-md-2 text-center">
                <label style="font-size: 1.5em">
                    <input name="secs" id="sec@{@i}" type="checkbox" @item.MenuID>
                    <span class="cr"><i class="cr-icon fa fa-check"></i></span>
                </label>
            </div>
		</div>
		i++;
	}
}
<div class="row m-t-30">
	<div class="col-md-offset-8 col-md-4">
		<button class="btn btn-primary btn-block" onclick="submit()">Kaydet</button>
	</div>
</div>
<script>
	function submit()
	{
		var tmp = "";
		for (var i = 0; i < @i; i++) {
            if ($("#sec" + i).prop("checked") == true)
                tmp += $("#role" + i).val() + ",";
		}
        $("#RoleName").val(tmp);
		$("#frmAdd").submit();
	}
</script>