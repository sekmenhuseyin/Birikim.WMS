<div class="col-md-12" style="width:100%;">
    <div class="portlet box green">
        <div class="portlet-title">
            <div class="caption">
                <i class="fa fa-gift"></i>Fiyat Onay GM
            </div>
            <div class="col-md-2 pull-right m-t-5">
                <a class="btn btn-default pull-right input-circle" href="#modalEditPage" data-toggle="modal"> Yenile </a>
            </div>
            <div class="col-md-2 pull-right m-t-5">
                <a class="btn btn-default pull-right input-circle refresh-buton" href="#modalEditPage" data-toggle="modal"> Onayla </a>
            </div>
            <div class="col-md-2 pull-right m-t-5">
                <a class="btn btn-default pull-right input-circle reddet-buton" href="#modalEditPage" data-toggle="modal"> Reddet </a>
            </div>
            <div class="col-md-2 pull-right m-t-5">
                <a class="btn btn-default pull-right input-circle alayinisec-buton" href="#modalEditPage" data-toggle="modal"> Tümünü Seç </a>
            </div>
            <div class="col-md-2 pull-right m-t-5">
                <a class="btn btn-default pull-right input-circle alayinikaldir-buton" href="#modalEditPage" data-toggle="modal"> Tümünü Kaldır </a>
            </div>
        </div>

        <div class="portlet-body">
            <div class="table-toolbar">
                <div class="row">
                    <div class="col-md-6">
                        <div class="btn-group">

                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="btn-group pull-right">
                            <button class="btn green  btn-outline dropdown-toggle" data-toggle="dropdown">
                                Tools
                                <i class="fa fa-angle-down"></i>
                            </button>
                            <ul class="dropdown-menu pull-right">
                                <li>
                                    <a href="javascript:;">
                                        <i class="fa fa-print"></i> Print
                                    </a>
                                </li>
                                <li>
                                    <a href="javascript:;">
                                        <i class="fa fa-file-pdf-o"></i> Save as PDF
                                    </a>
                                </li>
                                <li>
                                    <a href="javascript:;">
                                        <i class="fa fa-file-excel-o"></i> Export to Excel
                                    </a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <table class="table table-striped table-bordered table-hover" id="sample_1">
                <thead>
                    <tr>
                        <th></th>
                        <th>
                            <label class="mt-checkbox mt-checkbox-single mt-checkbox-outline">
                                <input type="checkbox" class="group-checkable" data-set="#sample_1 .checkboxes" />
                                <span></span>
                            </label>
                        </th>
                        <th> Liste No </th>
                        <th> Durum </th>
                        <th> Ürün Kodu </th>
                        <th> Ürün Adı </th>
                        <th> Müşteri Kodu </th>
                        <th>Ünvan</th>
                        <th>Satış Fiyat1</th>
                        <th>Satış Fiyat1 Birim</th>
                        <th>Döviz Satış Fiyat</th>
                        <th>Döviz Satış Fiyat1 Birim</th>
                        <th>Döviz Cinsi</th>

                    </tr>
                </thead>
            </table>

        </div>
    </div>
</div>
<script>
   
            var secili_satir = new Array();
            var secili_table = new Array();
        var table = $('#sample_1').DataTable({
            "language": { "url": "http://cdn.datatables.net/plug-ins/1.10.13/i18n/Turkish.json" },
            "ajax": {
                "url": '/Approval/FiyatGMOnayCek',
                "dataSrc": function (json) {
                    return json;
                },
            },
            //"responsive": true,
            "fixedHeader": true,
            "columnDefs": [{ "visible": false, "targets": 0 }],
            "scrollX": true,
            "columns": [
                { "data": "ID" },
                { "data": null, "defaultContent": '', "className": 'select-checkbox', "orderable": false },
                { "data": "FiyatListNum", "sClass": "nowrap" },
                { "data": "Durum", "sClass": "nowrap" },
                { "data": "MalKodu", "sClass": "nowrap" },
                { "data": "MalAdi", "sClass": "nowrap" },
                { "data": "HesapKodu", "sClass": "nowrap" },
                { "data": "Unvan", "sClass": "nowrap" },
                { "data": "SatisFiyat1", "sClass": "nowrap" },
                { "data": "SatisFiyat1Birim", "sClass": "nowrap" },
                { "data": "DovizSatisFiyat1", "sClass": "nowrap" },
                { "data": "DovizSF1Birim", "sClass": "nowrap" },
                { "data": "DovizCinsi", "sClass": "nowrap" },
                //{
                //    "render": function ( data, type, full, meta ) {
                //        return table.saveContact(full);
                //    }
                //},
            ],
            "ordering": false,
            "fnRowCallback": function (nRow, aData, iDisplayIndex) {
                $('td', nRow).attr('nowrap', 'nowrap');
                return nRow;
            }
        });


        $('#sample_1 tbody').on('click', 'tr', function () {
            $(this).toggleClass('selected');
        });


        $('.refresh-buton').click(function () {
            var x = table.rows('.selected').data();
            for (var i = 0; i < x.length; i++) {
                secili_table.push(x[i]);
            }
            var _dfd = $.Deferred();
            $.ajax({
                url: window.location.origin + "/Approval/Fiyat_Onay",
                data: { Data: JSON.stringify(secili_table) },
                type: "post",
                success: function (data) {
                    console.log(data);

                },
                error: function (jqxhr) { console.log(jqxhr); }
            });
            return _dfd.promise();

        });

        $('.reddet-buton').click(function () {
            var x = table.rows('.selected').data();
            for (var i = 0; i < x.length; i++) {
                secili_table.push(x[i]);
            }
            var _dfd = $.Deferred();
            $.ajax({
                url: window.location.origin + "/Approval/Fiyat_Red",
                data: { Data: JSON.stringify(secili_table) },
                type: "post",
                success: function (data) {
                    console.log(data);

                },
                error: function (jqxhr) { console.log(jqxhr); }
            });
            return _dfd.promise();

        });

        $('.alayinisec-buton').click(function () {

            $('tbody tr').addClass('selected');


        });
        $('.alayinikaldir-buton').click(function () {

            $('tbody tr').removeClass('selected');


        });
        $(document).ready(function () { });
    
</script>

