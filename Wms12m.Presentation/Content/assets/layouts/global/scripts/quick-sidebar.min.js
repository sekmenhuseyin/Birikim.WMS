var QuickSidebar=function(){var n=function(){$(".dropdown-quick-sidebar-toggler a, .page-quick-sidebar-toggler, .quick-sidebar-toggler").click(function(){$("body").toggleClass("page-quick-sidebar-open")})},t=function(){var t=$(".page-quick-sidebar-wrapper"),n=t.find(".page-quick-sidebar-chat"),r=function(){var u=t.find(".page-quick-sidebar-chat-users"),f,i,r;f=t.height()-t.find(".nav-tabs").outerHeight(!0);App.destroySlimScroll(u);u.attr("data-height",f);App.initSlimScroll(u);i=n.find(".page-quick-sidebar-chat-user-messages");r=f-n.find(".page-quick-sidebar-chat-user-form").outerHeight(!0);r=r-n.find(".page-quick-sidebar-nav").outerHeight(!0);App.destroySlimScroll(i);i.attr("data-height",r);App.initSlimScroll(i)},i;r();App.addResizeHandler(r);t.find(".page-quick-sidebar-chat-users .media-list > .media").click(function(){PartialView("/Home/UsersChat","UsersChat",JSON.stringify({ID:$(this).find("input").val()}));n.addClass("page-quick-sidebar-content-item-shown")});t.find(".page-quick-sidebar-chat-user .page-quick-sidebar-back-to-list").click(function(){n.removeClass("page-quick-sidebar-content-item-shown")});i=function(t){t.preventDefault();var r=n.find(".page-quick-sidebar-chat-user-messages"),u=n.find(".page-quick-sidebar-chat-user-form .form-control"),f=u.val();if(f.length!==0){var o=function(n,t,i,r,u){var f="";return f+='<div class="post '+n+'">',f+='<img class="avatar" alt="" src="/Content/Uploads/'+r+'.jpg"/>',f+='<div class="message">',f+='<span class="arrow"><\/span>',f+='<a href="#" class="name">'+i+"<\/a>&nbsp;",f+='<span class="datetime">'+t+"<\/span>",f+='<span class="body">',f+=u,f+="<\/span>",f+="<\/div>",f+"<\/div>"},e=new Date,i=o("out",e.getHours()+":"+e.getMinutes(),currentUserName,currentUserImage,f);i=$(i);r.append(i);r.slimScroll({scrollTo:"1000000px"});u.val("")}};n.find(".page-quick-sidebar-chat-user-form .btn").click(i);n.find(".page-quick-sidebar-chat-user-form .form-control").keypress(function(n){if(n.which==13)return i(n),!1})};return{init:function(){n();t()}}}();App.isAngularJsApp()===!1&&jQuery(document).ready(function(){QuickSidebar.init()});